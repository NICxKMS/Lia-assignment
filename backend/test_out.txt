============================= test session starts =============================
platform win32 -- Python 3.11.11, pytest-9.0.1, pluggy-1.6.0 -- F:\Study\Code\git\Lia-assignment\backend\.venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: F:\Study\Code\git\Lia-assignment\backend
configfile: pyproject.toml
plugins: anyio-4.12.0, asyncio-1.3.0, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 220 items

tests/test_auth.py::TestAuthRegister::test_register_success PASSED       [  0%]
tests/test_auth.py::TestAuthRegister::test_register_duplicate_email PASSED [  0%]
tests/test_auth.py::TestAuthRegister::test_register_duplicate_username PASSED [  1%]
tests/test_auth.py::TestAuthRegister::test_register_invalid_email PASSED [  1%]
tests/test_auth.py::TestAuthRegister::test_register_short_password PASSED [  2%]
tests/test_auth.py::TestAuthRegister::test_register_short_username PASSED [  2%]
tests/test_auth.py::TestAuthRegister::test_register_invalid_username_characters PASSED [  3%]
tests/test_auth.py::TestAuthRegister::test_register_missing_fields PASSED [  3%]
tests/test_auth.py::TestAuthLogin::test_login_success PASSED             [  4%]
tests/test_auth.py::TestAuthLogin::test_login_wrong_password PASSED      [  4%]
tests/test_auth.py::TestAuthLogin::test_login_nonexistent_user PASSED    [  5%]
tests/test_auth.py::TestAuthLogin::test_login_invalid_email_format PASSED [  5%]
tests/test_auth.py::TestAuthMe::test_get_me_success PASSED               [  5%]
tests/test_auth.py::TestAuthMe::test_get_me_unauthorized PASSED          [  6%]
tests/test_auth.py::TestAuthMe::test_get_me_invalid_token PASSED         [  6%]
tests/test_auth.py::TestAuthMe::test_get_me_malformed_header PASSED      [  7%]
tests/test_auth.py::TestAuthRefresh::test_refresh_token_success PASSED   [  7%]
tests/test_auth.py::TestAuthRefresh::test_refresh_token_unauthorized PASSED [  8%]
tests/test_auth.py::TestAuthCookies::test_login_sets_httponly_cookie PASSED [  8%]
tests/test_auth.py::TestAuthCookies::test_login_cookie_samesite_lax PASSED [  9%]
tests/test_auth.py::TestAuthCookies::test_register_sets_httponly_cookie PASSED [  9%]
tests/test_auth.py::TestAuthCookies::test_refresh_sets_new_cookie PASSED [ 10%]
tests/test_auth.py::TestAuthCookies::test_logout_clears_cookie PASSED    [ 10%]
tests/test_auth.py::TestAuthCookies::test_duplicate_registration_returns_409 PASSED [ 10%]
tests/test_auth.py::TestAuthCookies::test_login_with_rate_limiting_429 PASSED [ 11%]
tests/test_cache.py::TestCacheServiceInit::test_init_without_redis PASSED [ 11%]
tests/test_cache.py::TestCacheServiceInit::test_make_key PASSED          [ 12%]
tests/test_cache.py::TestConversationContextCache::test_get_conversation_context_unavailable PASSED [ 12%]
tests/test_cache.py::TestConversationContextCache::test_set_conversation_context_unavailable PASSED [ 13%]
tests/test_cache.py::TestConversationContextCache::test_append_to_context_unavailable PASSED [ 13%]
tests/test_cache.py::TestUserMessagesCache::test_get_user_messages_unavailable PASSED [ 14%]
tests/test_cache.py::TestUserMessagesCache::test_set_user_messages_unavailable PASSED [ 14%]
tests/test_cache.py::TestUserMessagesCache::test_set_user_messages_empty_list PASSED [ 15%]
tests/test_cache.py::TestUserMessagesCache::test_append_user_message_unavailable PASSED [ 15%]
tests/test_cache.py::TestConversationHistoryCache::test_get_conversation_history_unavailable PASSED [ 15%]
tests/test_cache.py::TestConversationHistoryCache::test_set_conversation_history_unavailable PASSED [ 16%]
tests/test_cache.py::TestUserDataCache::test_get_user_data_unavailable PASSED [ 16%]
tests/test_cache.py::TestUserDataCache::test_set_user_data_unavailable PASSED [ 17%]
tests/test_cache.py::TestUserDataCache::test_get_user_by_email_unavailable PASSED [ 17%]
tests/test_cache.py::TestCacheInvalidation::test_invalidate_conversation_unavailable PASSED [ 18%]
tests/test_cache.py::TestCacheInvalidation::test_invalidate_user_history_unavailable PASSED [ 18%]
tests/test_cache.py::TestCacheInvalidation::test_invalidate_user_data_unavailable PASSED [ 19%]
tests/test_cache.py::TestStaticDataCache::test_get_available_models_unavailable PASSED [ 19%]
tests/test_cache.py::TestStaticDataCache::test_set_available_models_unavailable PASSED [ 20%]
tests/test_cache.py::TestStaticDataCache::test_get_sentiment_methods_unavailable PASSED [ 20%]
tests/test_cache.py::TestStaticDataCache::test_set_sentiment_methods_unavailable PASSED [ 20%]
tests/test_cache.py::TestLowLevelOperations::test_get_unavailable PASSED [ 21%]
tests/test_cache.py::TestLowLevelOperations::test_set_unavailable PASSED [ 21%]
tests/test_cache.py::TestLowLevelOperations::test_delete_unavailable PASSED [ 22%]
tests/test_cache.py::TestLowLevelOperations::test_mget_unavailable PASSED [ 22%]
tests/test_cache.py::TestLowLevelOperations::test_get_json_unavailable PASSED [ 23%]
tests/test_cache.py::TestHealthCheck::test_check_health_unavailable PASSED [ 23%]
tests/test_cache.py::TestCacheKeyPrefixes::test_key_prefixes_defined PASSED [ 24%]
tests/test_cache.py::TestCacheKeyPrefixes::test_ttl_constants_defined PASSED [ 24%]
tests/test_chat_api.py::TestChatHistory::test_get_history_empty PASSED   [ 25%]
tests/test_chat_api.py::TestChatHistory::test_get_history_with_conversations PASSED [ 25%]
tests/test_chat_api.py::TestChatHistory::test_get_history_unauthorized PASSED [ 25%]
tests/test_chat_api.py::TestChatHistory::test_get_history_with_limit PASSED [ 26%]
tests/test_chat_api.py::TestConversationDetail::test_get_conversation_detail PASSED [ 26%]
tests/test_chat_api.py::TestConversationDetail::test_get_conversation_not_found PASSED [ 27%]
tests/test_chat_api.py::TestConversationDetail::test_get_conversation_unauthorized PASSED [ 27%]
tests/test_chat_api.py::TestConversationDetail::test_get_other_users_conversation PASSED [ 28%]
tests/test_chat_api.py::TestDeleteConversation::test_delete_conversation PASSED [ 28%]
tests/test_chat_api.py::TestDeleteConversation::test_delete_conversation_not_found PASSED [ 29%]
tests/test_chat_api.py::TestDeleteConversation::test_delete_conversation_unauthorized PASSED [ 29%]
tests/test_chat_api.py::TestDeleteConversation::test_delete_all_conversations PASSED [ 30%]
tests/test_chat_api.py::TestRenameConversation::test_rename_conversation PASSED [ 30%]
tests/test_chat_api.py::TestRenameConversation::test_rename_conversation_not_found PASSED [ 30%]
tests/test_chat_api.py::TestRenameConversation::test_rename_conversation_empty_title PASSED [ 31%]
tests/test_chat_api.py::TestRenameConversation::test_rename_conversation_unauthorized PASSED [ 31%]
tests/test_chat_api.py::TestChatModels::test_get_models PASSED           [ 32%]
tests/test_chat_api.py::TestSentimentMethods::test_get_methods PASSED    [ 32%]
tests/test_chat_api.py::TestChatRequestValidation::test_invalid_provider PASSED [ 33%]
tests/test_chat_api.py::TestChatRequestValidation::test_invalid_sentiment_method PASSED [ 33%]
tests/test_chat_api.py::TestChatRequestValidation::test_empty_message PASSED [ 34%]
tests/test_chat_api.py::TestChatRequestValidation::test_chat_unauthorized PASSED [ 34%]
tests/test_chat_api.py::TestSSEErrorPaths::test_stream_yields_error_event_on_llm_failure PASSED [ 35%]
tests/test_chat_api.py::TestSSEErrorPaths::test_error_event_contains_generic_message PASSED [ 35%]
tests/test_chat_api.py::TestSSEErrorPaths::test_stream_handles_model_settings_type_coercion PASSED [ 35%]
tests/test_chat_sentiment.py::TestChatOrchestrator::test_get_or_create_conversation_new PASSED [ 36%]
tests/test_chat_sentiment.py::TestChatOrchestrator::test_get_or_create_conversation_existing PASSED [ 36%]
tests/test_chat_sentiment.py::TestChatOrchestrator::test_get_or_create_conversation_wrong_user PASSED [ 37%]
tests/test_chat_sentiment.py::TestChatOrchestrator::test_load_context_from_db PASSED [ 37%]
tests/test_chat_sentiment.py::TestChatOrchestrator::test_load_context_from_cache PASSED [ 38%]
tests/test_chat_sentiment.py::TestIncrementalSentiment::test_cumulative_sentiment_called_for_multiple_messages PASSED [ 38%]
tests/test_chat_sentiment.py::TestIncrementalSentiment::test_cumulative_sentiment_uses_incremental_update PASSED [ 39%]
tests/test_chat_sentiment.py::TestConversationHistory::test_get_conversation_history PASSED [ 39%]
tests/test_chat_sentiment.py::TestConversationHistory::test_get_conversation_history_empty PASSED [ 40%]
tests/test_chat_sentiment.py::TestConversationDetail::test_get_conversation_detail PASSED [ 40%]
tests/test_chat_sentiment.py::TestConversationDetail::test_get_conversation_detail_not_found PASSED [ 40%]
tests/test_chat_sentiment.py::TestConversationDetail::test_get_conversation_detail_wrong_user PASSED [ 41%]
tests/test_chat_sentiment.py::TestConversationDelete::test_delete_conversation PASSED [ 41%]
tests/test_chat_sentiment.py::TestConversationDelete::test_delete_conversation_not_found PASSED [ 42%]
tests/test_chat_sentiment.py::TestConversationDelete::test_delete_all_conversations PASSED [ 42%]
tests/test_chat_sentiment.py::TestConversationRename::test_rename_conversation PASSED [ 43%]
tests/test_chat_sentiment.py::TestConversationRename::test_rename_conversation_not_found PASSED [ 43%]
tests/test_chat_sentiment.py::TestSentimentResult::test_sentiment_result_to_dict PASSED [ 44%]
tests/test_chat_sentiment.py::TestSentimentResult::test_score_to_label_positive PASSED [ 44%]
tests/test_chat_sentiment.py::TestSentimentResult::test_score_to_label_negative PASSED [ 45%]
tests/test_chat_sentiment.py::TestSentimentResult::test_score_to_label_neutral PASSED [ 45%]
tests/test_chat_sentiment.py::TestSentimentResult::test_neutral_factory PASSED [ 45%]
tests/test_chat_thinking.py::TestSSEThoughtEvents::test_sse_thought_event_format PASSED [ 46%]
tests/test_chat_thinking.py::TestSSEThoughtEvents::test_sse_chunk_event_format PASSED [ 46%]
tests/test_chat_thinking.py::TestChatOrchestratorThinking::test_stream_yields_thought_events PASSED [ 47%]
tests/test_chat_thinking.py::TestChatOrchestratorThinking::test_thoughts_stored_in_message_model_info PASSED [ 47%]
tests/test_chat_thinking.py::TestChatOrchestratorThinking::test_cache_includes_thoughts PASSED [ 48%]
tests/test_chat_thinking.py::TestChatOrchestratorThinking::test_no_thoughts_when_none_generated PASSED [ 48%]
tests/test_chat_thinking.py::TestStructuredStreamThoughts::test_structured_stream_with_thoughts PASSED [ 49%]
tests/test_deps.py::TestGetCurrentUserTokenSources::test_reads_token_from_authorization_header PASSED [ 49%]
tests/test_deps.py::TestGetCurrentUserTokenSources::test_reads_token_from_cookie PASSED [ 50%]
tests/test_deps.py::TestGetCurrentUserTokenSources::test_prefers_cookie_over_header PASSED [ 50%]
tests/test_deps.py::TestGetCurrentUserTokenSources::test_expired_token_returns_401 PASSED [ 50%]
tests/test_deps.py::TestGetCurrentUserTokenSources::test_refresh_token_rejected_as_access_token PASSED [ 51%]
tests/test_deps.py::TestGetCurrentUserTokenSources::test_malformed_jwt_returns_401 PASSED [ 51%]
tests/test_deps.py::TestGetCurrentUserTokenSources::test_no_token_returns_401 PASSED [ 52%]
tests/test_deps.py::TestGetCurrentUserTokenSources::test_token_with_invalid_user_id_returns_401 PASSED [ 52%]
tests/test_deps.py::TestGetCurrentUserTokenSources::test_token_with_non_numeric_sub_returns_401 PASSED [ 53%]
tests/test_health.py::TestRootEndpoint::test_root_returns_200 PASSED     [ 53%]
tests/test_health.py::TestRootEndpoint::test_root_contains_app_info PASSED [ 54%]
tests/test_health.py::TestRootEndpoint::test_root_timestamp_format PASSED [ 54%]
tests/test_health.py::TestHealthEndpoint::test_health_returns_200 PASSED [ 55%]
tests/test_health.py::TestHealthEndpoint::test_health_contains_required_fields PASSED [ 55%]
tests/test_health.py::TestHealthEndpoint::test_health_status_values PASSED [ 55%]
tests/test_health.py::TestHealthEndpoint::test_health_services_structure PASSED [ 56%]
tests/test_health.py::TestHealthEndpoint::test_health_cache_service_present PASSED [ 56%]
tests/test_health.py::TestHealthEndpoint::test_health_latency_tracking PASSED [ 57%]
tests/test_health.py::TestLivenessProbe::test_liveness_returns_200 PASSED [ 57%]
tests/test_health.py::TestLivenessProbe::test_liveness_status_ok PASSED  [ 58%]
tests/test_health.py::TestLivenessProbe::test_liveness_fast_response PASSED [ 58%]
tests/test_health.py::TestReadinessProbe::test_readiness_returns_200 PASSED [ 59%]
tests/test_health.py::TestReadinessProbe::test_readiness_status_present PASSED [ 59%]
tests/test_health.py::TestReadinessProbe::test_readiness_checks_database PASSED [ 60%]
tests/test_health.py::TestHealthEndpointNoAuth::test_root_no_auth_required PASSED [ 60%]
tests/test_health.py::TestHealthEndpointNoAuth::test_health_no_auth_required PASSED [ 60%]
tests/test_health.py::TestHealthEndpointNoAuth::test_liveness_no_auth_required PASSED [ 61%]
tests/test_health.py::TestHealthEndpointNoAuth::test_readiness_no_auth_required PASSED [ 61%]
tests/test_health.py::TestSystemInfoEndpoint::test_info_returns_200 PASSED [ 62%]
tests/test_health.py::TestSystemInfoEndpoint::test_info_contains_application_data PASSED [ 62%]
tests/test_health.py::TestSystemInfoEndpoint::test_info_contains_system_data PASSED [ 63%]
tests/test_health.py::TestSystemInfoEndpoint::test_info_contains_uptime PASSED [ 63%]
tests/test_health.py::TestSystemInfoEndpoint::test_info_no_auth_required PASSED [ 64%]
tests/test_health.py::TestDatabaseHealthEndpoint::test_db_health_returns_200_when_healthy PASSED [ 64%]
tests/test_health.py::TestDatabaseHealthEndpoint::test_db_health_contains_required_fields PASSED [ 65%]
tests/test_health.py::TestDatabaseHealthEndpoint::test_db_health_latency_positive PASSED [ 65%]
tests/test_health.py::TestDatabaseHealthEndpoint::test_db_health_no_auth_required PASSED [ 65%]
tests/test_health.py::TestCacheHealthEndpoint::test_cache_health_returns_200 PASSED [ 66%]
tests/test_health.py::TestCacheHealthEndpoint::test_cache_health_contains_required_fields PASSED [ 66%]
tests/test_health.py::TestCacheHealthEndpoint::test_cache_health_status_valid PASSED [ 67%]
tests/test_health.py::TestCacheHealthEndpoint::test_cache_health_no_auth_required PASSED [ 67%]
tests/test_health.py::TestRootEndpointEnriched::test_root_contains_environment PASSED [ 68%]
tests/test_health.py::TestRootEndpointEnriched::test_root_contains_documentation_link PASSED [ 68%]
tests/test_health.py::TestLivenessEnriched::test_liveness_contains_timestamp PASSED [ 69%]
tests/test_health.py::TestReadinessEnriched::test_readiness_contains_timestamp PASSED [ 69%]
tests/test_llm_thinking.py::TestStreamChunk::test_stream_chunk_default_values PASSED [ 70%]
tests/test_llm_thinking.py::TestStreamChunk::test_stream_chunk_thought_flag PASSED [ 70%]
tests/test_llm_thinking.py::TestStreamChunk::test_stream_chunk_regular_content PASSED [ 70%]
tests/test_llm_thinking.py::TestStreamChunk::test_stream_chunk_final PASSED [ 71%]
tests/test_llm_thinking.py::TestStreamChunk::test_structured_stream_chunk_inherits_thought PASSED [ 71%]
tests/test_llm_thinking.py::TestGeminiAdapterThinking::test_generate_stream_creates_thinking_config PASSED [ 72%]
tests/test_llm_thinking.py::TestGeminiAdapterThinking::test_generate_stream_handles_text_only_chunk PASSED [ 72%]
tests/test_llm_thinking.py::TestGeminiAdapterThinking::test_generate_stream_no_api_key_raises PASSED [ 73%]
tests/test_llm_thinking.py::TestThinkingConfigParameters::test_thinking_budget_dynamic PASSED [ 73%]
tests/test_llm_thinking.py::TestThinkingConfigParameters::test_thinking_config_include_thoughts_false PASSED [ 74%]
tests/test_llm_thinking.py::TestModelInfo::test_gemini_flash_model_info PASSED [ 74%]
tests/test_rate_limit.py::TestRateLimitServiceDisabled::test_check_general_limit_allows_when_disabled PASSED [ 75%]
tests/test_rate_limit.py::TestRateLimitServiceDisabled::test_check_chat_limit_allows_when_disabled PASSED [ 75%]
tests/test_rate_limit.py::TestRateLimitServiceDisabled::test_check_auth_limit_allows_when_disabled PASSED [ 75%]
tests/test_rate_limit.py::TestRateLimitServiceEnabled::test_check_chat_limit_allows_under_limit PASSED [ 76%]
tests/test_rate_limit.py::TestRateLimitServiceEnabled::test_check_chat_limit_blocks_over_limit PASSED [ 76%]
tests/test_rate_limit.py::TestRateLimitServiceEnabled::test_check_chat_limit_allows_at_exact_limit PASSED [ 77%]
tests/test_rate_limit.py::TestRateLimitServiceEnabled::test_check_general_limit_returns_correct_remaining PASSED [ 77%]
tests/test_rate_limit.py::TestRateLimitServiceEnabled::test_check_auth_limit_fail_closed_on_redis_error PASSED [ 78%]
tests/test_rate_limit.py::TestRateLimitServiceEnabled::test_check_general_limit_fail_open_on_redis_error PASSED [ 78%]
tests/test_rate_limit.py::TestRateLimitServiceEnabled::test_check_chat_limit_fail_open_on_redis_error PASSED [ 79%]
tests/test_rate_limit.py::TestRateLimitServiceEnabled::test_sliding_window_sends_correct_pipeline_commands PASSED [ 79%]
tests/test_rate_limit.py::TestRateLimitServiceEnabled::test_close_client PASSED [ 80%]
tests/test_rate_limit.py::TestRateLimitServiceEnabled::test_close_when_no_client PASSED [ 80%]
tests/test_rate_limit.py::TestRateLimitServiceEnabled::test_get_client_creates_client_lazily PASSED [ 80%]
tests/test_security.py::TestPasswordHashing::test_password_hash_different_from_plain PASSED [ 81%]
tests/test_security.py::TestPasswordHashing::test_password_hash_starts_with_bcrypt_prefix PASSED [ 81%]
tests/test_security.py::TestPasswordHashing::test_password_hash_unique_each_time PASSED [ 82%]
tests/test_security.py::TestPasswordHashing::test_verify_password_correct PASSED [ 82%]
tests/test_security.py::TestPasswordHashing::test_verify_password_incorrect PASSED [ 83%]
tests/test_security.py::TestPasswordHashing::test_verify_password_empty PASSED [ 83%]
tests/test_security.py::TestJWTTokens::test_create_access_token_contains_sub PASSED [ 84%]
tests/test_security.py::TestJWTTokens::test_create_access_token_contains_exp PASSED [ 84%]
tests/test_security.py::TestJWTTokens::test_create_access_token_contains_iat PASSED [ 85%]
tests/test_security.py::TestJWTTokens::test_create_access_token_custom_expiry PASSED [ 85%]
tests/test_security.py::TestJWTTokens::test_decode_invalid_token_returns_none PASSED [ 85%]
tests/test_security.py::TestJWTTokens::test_decode_empty_token_returns_none PASSED [ 86%]
tests/test_security.py::TestJWTTokens::test_decode_malformed_token_returns_none PASSED [ 86%]
tests/test_security.py::TestJWTTokens::test_create_access_token_preserves_custom_data PASSED [ 87%]
tests/test_security.py::TestRefreshTokens::test_create_refresh_token_contains_type PASSED [ 87%]
tests/test_security.py::TestRefreshTokens::test_create_refresh_token_contains_user_id PASSED [ 88%]
tests/test_security.py::TestTokenExpiration::test_expired_token_returns_none PASSED [ 88%]
tests/test_security.py::TestTokenExpiration::test_future_token_is_valid PASSED [ 89%]
tests/test_security.py::TestTokenSecurity::test_different_users_get_different_tokens PASSED [ 89%]
tests/test_security.py::TestTokenSecurity::test_token_with_wrong_secret_fails PASSED [ 90%]
tests/test_sentiment.py::TestSentimentResult::test_to_dict_complete PASSED [ 90%]
tests/test_sentiment.py::TestSentimentResult::test_to_dict_minimal PASSED [ 90%]
tests/test_sentiment.py::TestSentimentResult::test_score_rounding PASSED [ 91%]
tests/test_sentiment.py::TestSentimentResult::test_score_to_label_boundaries PASSED [ 91%]
tests/test_sentiment.py::TestSentimentResult::test_score_to_label_extremes PASSED [ 92%]
tests/test_sentiment.py::TestSentimentResult::test_neutral_factory PASSED [ 92%]
tests/test_sentiment.py::TestSentimentService::test_available_methods PASSED [ 93%]
tests/test_sentiment.py::TestSentimentService::test_get_strategy_nlp_api PASSED [ 93%]
tests/test_sentiment.py::TestSentimentService::test_get_strategy_llm_separate PASSED [ 94%]
tests/test_sentiment.py::TestSentimentService::test_get_strategy_structured PASSED [ 94%]
tests/test_sentiment.py::TestSentimentService::test_get_strategy_unknown PASSED [ 95%]
tests/test_sentiment.py::TestSentimentService::test_strategy_caching PASSED [ 95%]
tests/test_sentiment.py::TestSentimentService::test_strategy_caching_with_different_params PASSED [ 95%]
tests/test_sentiment.py::TestGoogleCloudNLPStrategy::test_strategy_name PASSED [ 96%]
tests/test_sentiment.py::TestGoogleCloudNLPStrategy::test_analyze_not_available PASSED [ 96%]
tests/test_sentiment.py::TestLLMSeparateStrategy::test_strategy_name PASSED [ 97%]
tests/test_sentiment.py::TestLLMSeparateStrategy::test_system_prompt_defined PASSED [ 97%]
tests/test_sentiment.py::TestStructuredOutputStrategy::test_strategy_name PASSED [ 98%]
tests/test_sentiment.py::TestStructuredOutputStrategy::test_analyze_falls_back_to_nlp PASSED [ 98%]
tests/test_sentiment.py::TestStructuredOutputStrategy::test_analyze_returns_neutral_without_cloud_nlp PASSED [ 99%]
tests/test_sentiment.py::TestSentimentServiceAnalyze::test_analyze_calls_strategy PASSED [ 99%]
tests/test_sentiment.py::TestSentimentServiceAnalyze::test_analyze_with_custom_provider PASSED [100%]

============================== warnings summary ===============================
.venv\Lib\site-packages\_pytest\config\__init__.py:1272
  F:\Study\Code\git\Lia-assignment\backend\.venv\Lib\site-packages\_pytest\config\__init__.py:1272: PytestAssertRewriteWarning: Module already imported so cannot be rewritten; anyio
    self._mark_plugins_for_rewrite(hook, disable_autoload)

tests/test_chat_thinking.py::TestChatOrchestratorThinking::test_stream_yields_thought_events
tests/test_chat_thinking.py::TestChatOrchestratorThinking::test_thoughts_stored_in_message_model_info
tests/test_chat_thinking.py::TestChatOrchestratorThinking::test_cache_includes_thoughts
tests/test_chat_thinking.py::TestChatOrchestratorThinking::test_no_thoughts_when_none_generated
tests/test_chat_thinking.py::TestStructuredStreamThoughts::test_structured_stream_with_thoughts
  F:\Study\Code\git\Lia-assignment\backend\app\services\chat.py:176: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    context.append({"role": "user", "content": message})
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================= 220 passed, 6 warnings in 68.86s (0:01:08) ==================
